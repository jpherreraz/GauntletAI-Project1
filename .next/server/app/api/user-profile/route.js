/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user-profile/route";
exports.ids = ["app/api/user-profile/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser-profile%2Froute&page=%2Fapi%2Fuser-profile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-profile%2Froute.ts&appDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser-profile%2Froute&page=%2Fapi%2Fuser-profile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-profile%2Froute.ts&appDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_juanp_GauntletAI_Project_1_app_api_user_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/user-profile/route.ts */ \"(rsc)/./app/api/user-profile/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user-profile/route\",\n        pathname: \"/api/user-profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/user-profile/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\juanp\\\\GauntletAI\\\\Project 1\\\\app\\\\api\\\\user-profile\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_juanp_GauntletAI_Project_1_app_api_user_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyLXByb2ZpbGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXItcHJvZmlsZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVzZXItcHJvZmlsZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNqdWFucCU1Q0dhdW50bGV0QUklNUNQcm9qZWN0JTIwMSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDanVhbnAlNUNHYXVudGxldEFJJTVDUHJvamVjdCUyMDEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxqdWFucFxcXFxHYXVudGxldEFJXFxcXFByb2plY3QgMVxcXFxhcHBcXFxcYXBpXFxcXHVzZXItcHJvZmlsZVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXNlci1wcm9maWxlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci1wcm9maWxlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS91c2VyLXByb2ZpbGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxqdWFucFxcXFxHYXVudGxldEFJXFxcXFByb2plY3QgMVxcXFxhcHBcXFxcYXBpXFxcXHVzZXItcHJvZmlsZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser-profile%2Froute&page=%2Fapi%2Fuser-profile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-profile%2Froute.ts&appDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/user-profile/route.ts":
/*!***************************************!*\
  !*** ./app/api/user-profile/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/server/createGetAuth.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/server/clerkClient.js\");\n/* harmony import */ var _src_services_messageService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/services/messageService */ \"(rsc)/./src/services/messageService.ts\");\n\n\n\n\nconst CLERK_API_URL = \"https://api.clerk.dev/v1\";\nconst CLERK_SECRET_KEY = process.env.CLERK_SECRET_KEY;\nasync function getClerkUser(userId) {\n    const response = await fetch(`${CLERK_API_URL}/users/${userId}`, {\n        headers: {\n            'Authorization': `Bearer ${CLERK_SECRET_KEY}`,\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!response.ok) {\n        throw new Error(`Failed to fetch user: ${response.statusText}`);\n    }\n    return response.json();\n}\nasync function updateClerkUser(userId, updates) {\n    const response = await fetch(`${CLERK_API_URL}/users/${userId}`, {\n        method: 'PATCH',\n        headers: {\n            'Authorization': `Bearer ${CLERK_SECRET_KEY}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updates)\n    });\n    if (!response.ok) {\n        throw new Error(`Failed to update user: ${response.statusText}`);\n    }\n    return response.json();\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const userId = searchParams.get('userId');\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'User ID is required'\n            }, {\n                status: 400\n            });\n        }\n        console.log('[GET] /api/user-profile - Fetching user:', userId);\n        const user = await getClerkUser(userId);\n        console.log('[GET] /api/user-profile - User found:', user.id);\n        const response = {\n            userId: user.id,\n            username: user.username || user.first_name || 'User',\n            imageUrl: user.image_url,\n            fullName: user.full_name || '',\n            status: 'online',\n            bio: ''\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error('[GET] /api/user-profile - Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to fetch user',\n            details: error instanceof Error ? error.message : String(error)\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const { userId } = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.getAuth)(request);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        console.log('[POST] /api/user-profile - Request:', {\n            userId,\n            updates: body\n        });\n        if (body.userId !== userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - user mismatch\"\n            }, {\n                status: 401\n            });\n        }\n        // Get current user first\n        const currentUser = await getClerkUser(userId);\n        console.log('[POST] /api/user-profile - Current user found:', currentUser.id);\n        // Prepare updates\n        const updates = {};\n        if (body.fullName) updates.first_name = body.fullName;\n        if (body.username) updates.username = body.username;\n        // Update user\n        const updatedUser = await updateClerkUser(userId, updates);\n        console.log('[POST] /api/user-profile - User updated:', updatedUser.id);\n        const response = {\n            userId: updatedUser.id,\n            username: updatedUser.username || updatedUser.first_name || 'User',\n            imageUrl: updatedUser.image_url,\n            fullName: updatedUser.full_name || '',\n            status: 'online',\n            bio: body.bio || ''\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error('[POST] /api/user-profile - Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to update user',\n            details: error instanceof Error ? error.message : String(error)\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        // Get the authenticated user's ID\n        const { userId } = await (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_2__.getAuth)(request);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Get user ID from query params\n        const { searchParams } = new URL(request.url);\n        const targetUserId = searchParams.get('userId');\n        // Ensure user can only delete their own profile\n        if (targetUserId !== userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized - user mismatch\"\n            }, {\n                status: 401\n            });\n        }\n        try {\n            // First, reassign all messages to deleted user\n            await _src_services_messageService__WEBPACK_IMPORTED_MODULE_1__.messageService.reassignMessagesToDeletedUser(userId);\n            // Then delete user from Clerk using the correct method\n            try {\n                await _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_3__.clerkClient.users.deleteUser(userId);\n                console.log('[DELETE] /api/user-profile - User deleted:', userId);\n            } catch (clerkError) {\n                console.error('[DELETE] /api/user-profile - Clerk API error:', clerkError);\n            // Even if Clerk deletion fails, we've already reassigned messages\n            // So we can consider this a partial success\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: 'User profile and messages updated successfully'\n            });\n        } catch (error) {\n            console.error('[DELETE] /api/user-profile - Operation error:', error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Failed to complete delete operation',\n                details: error instanceof Error ? error.message : String(error)\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error('[DELETE] /api/user-profile - Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to delete user profile',\n            details: error instanceof Error ? error.message : String(error)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTzVCLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJhLE9BQU87WUFDUGEsU0FBU2IsaUJBQWlCZixRQUFRZSxNQUFNYyxPQUFPLEdBQUdDLE9BQU9mO1FBQzNELEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcanVhbnBcXEdhdW50bGV0QUlcXFByb2plY3QgMVxcYXBwXFxhcGlcXHVzZXItcHJvZmlsZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gXCJAY2xlcmsvbmV4dGpzL3NlcnZlclwiO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBjbGVya0NsaWVudCB9IGZyb20gXCJAY2xlcmsvbmV4dGpzL3NlcnZlclwiO1xuaW1wb3J0IHsgbWVzc2FnZVNlcnZpY2UgfSBmcm9tIFwiQC9zcmMvc2VydmljZXMvbWVzc2FnZVNlcnZpY2VcIjtcblxuY29uc3QgQ0xFUktfQVBJX1VSTCA9IFwiaHR0cHM6Ly9hcGkuY2xlcmsuZGV2L3YxXCI7XG5jb25zdCBDTEVSS19TRUNSRVRfS0VZID0gcHJvY2Vzcy5lbnYuQ0xFUktfU0VDUkVUX0tFWTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0Q2xlcmtVc2VyKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7Q0xFUktfQVBJX1VSTH0vdXNlcnMvJHt1c2VySWR9YCwge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke0NMRVJLX1NFQ1JFVF9LRVl9YCxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVzZXI6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgfVxuXG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUNsZXJrVXNlcih1c2VySWQ6IHN0cmluZywgdXBkYXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0NMRVJLX0FQSV9VUkx9L3VzZXJzLyR7dXNlcklkfWAsIHtcbiAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7Q0xFUktfU0VDUkVUX0tFWX1gLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZXMpLFxuICB9KTtcblxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHVzZXI6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgfVxuXG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCB1c2VySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCd1c2VySWQnKTtcblxuICAgIGlmICghdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tHRVRdIC9hcGkvdXNlci1wcm9maWxlIC0gRmV0Y2hpbmcgdXNlcjonLCB1c2VySWQpO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDbGVya1VzZXIodXNlcklkKTtcbiAgICBjb25zb2xlLmxvZygnW0dFVF0gL2FwaS91c2VyLXByb2ZpbGUgLSBVc2VyIGZvdW5kOicsIHVzZXIuaWQpO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSB8fCB1c2VyLmZpcnN0X25hbWUgfHwgJ1VzZXInLFxuICAgICAgaW1hZ2VVcmw6IHVzZXIuaW1hZ2VfdXJsLFxuICAgICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lIHx8ICcnLFxuICAgICAgc3RhdHVzOiAnb25saW5lJyxcbiAgICAgIGJpbzogJydcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tHRVRdIC9hcGkvdXNlci1wcm9maWxlIC0gRXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdXNlcicsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gYXdhaXQgZ2V0QXV0aChyZXF1ZXN0KTtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc29sZS5sb2coJ1tQT1NUXSAvYXBpL3VzZXItcHJvZmlsZSAtIFJlcXVlc3Q6JywgeyB1c2VySWQsIHVwZGF0ZXM6IGJvZHkgfSk7XG4gICAgXG4gICAgaWYgKGJvZHkudXNlcklkICE9PSB1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIlVuYXV0aG9yaXplZCAtIHVzZXIgbWlzbWF0Y2hcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBjdXJyZW50IHVzZXIgZmlyc3RcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IGdldENsZXJrVXNlcih1c2VySWQpO1xuICAgIGNvbnNvbGUubG9nKCdbUE9TVF0gL2FwaS91c2VyLXByb2ZpbGUgLSBDdXJyZW50IHVzZXIgZm91bmQ6JywgY3VycmVudFVzZXIuaWQpO1xuXG4gICAgLy8gUHJlcGFyZSB1cGRhdGVzXG4gICAgY29uc3QgdXBkYXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgIGlmIChib2R5LmZ1bGxOYW1lKSB1cGRhdGVzLmZpcnN0X25hbWUgPSBib2R5LmZ1bGxOYW1lO1xuICAgIGlmIChib2R5LnVzZXJuYW1lKSB1cGRhdGVzLnVzZXJuYW1lID0gYm9keS51c2VybmFtZTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCB1cGRhdGVDbGVya1VzZXIodXNlcklkLCB1cGRhdGVzKTtcbiAgICBjb25zb2xlLmxvZygnW1BPU1RdIC9hcGkvdXNlci1wcm9maWxlIC0gVXNlciB1cGRhdGVkOicsIHVwZGF0ZWRVc2VyLmlkKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xuICAgICAgdXNlcklkOiB1cGRhdGVkVXNlci5pZCxcbiAgICAgIHVzZXJuYW1lOiB1cGRhdGVkVXNlci51c2VybmFtZSB8fCB1cGRhdGVkVXNlci5maXJzdF9uYW1lIHx8ICdVc2VyJyxcbiAgICAgIGltYWdlVXJsOiB1cGRhdGVkVXNlci5pbWFnZV91cmwsXG4gICAgICBmdWxsTmFtZTogdXBkYXRlZFVzZXIuZnVsbF9uYW1lIHx8ICcnLFxuICAgICAgc3RhdHVzOiAnb25saW5lJyxcbiAgICAgIGJpbzogYm9keS5iaW8gfHwgJydcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tQT1NUXSAvYXBpL3VzZXItcHJvZmlsZSAtIEVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSB1c2VyJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRoZSBhdXRoZW50aWNhdGVkIHVzZXIncyBJRFxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSBhd2FpdCBnZXRBdXRoKHJlcXVlc3QpO1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCB1c2VyIElEIGZyb20gcXVlcnkgcGFyYW1zXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHRhcmdldFVzZXJJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpO1xuXG4gICAgLy8gRW5zdXJlIHVzZXIgY2FuIG9ubHkgZGVsZXRlIHRoZWlyIG93biBwcm9maWxlXG4gICAgaWYgKHRhcmdldFVzZXJJZCAhPT0gdXNlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWQgLSB1c2VyIG1pc21hdGNoXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gRmlyc3QsIHJlYXNzaWduIGFsbCBtZXNzYWdlcyB0byBkZWxldGVkIHVzZXJcbiAgICAgIGF3YWl0IG1lc3NhZ2VTZXJ2aWNlLnJlYXNzaWduTWVzc2FnZXNUb0RlbGV0ZWRVc2VyKHVzZXJJZCk7XG4gICAgICBcbiAgICAgIC8vIFRoZW4gZGVsZXRlIHVzZXIgZnJvbSBDbGVyayB1c2luZyB0aGUgY29ycmVjdCBtZXRob2RcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNsZXJrQ2xpZW50LnVzZXJzLmRlbGV0ZVVzZXIodXNlcklkKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUxFVEVdIC9hcGkvdXNlci1wcm9maWxlIC0gVXNlciBkZWxldGVkOicsIHVzZXJJZCk7XG4gICAgICB9IGNhdGNoIChjbGVya0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUxFVEVdIC9hcGkvdXNlci1wcm9maWxlIC0gQ2xlcmsgQVBJIGVycm9yOicsIGNsZXJrRXJyb3IpO1xuICAgICAgICAvLyBFdmVuIGlmIENsZXJrIGRlbGV0aW9uIGZhaWxzLCB3ZSd2ZSBhbHJlYWR5IHJlYXNzaWduZWQgbWVzc2FnZXNcbiAgICAgICAgLy8gU28gd2UgY2FuIGNvbnNpZGVyIHRoaXMgYSBwYXJ0aWFsIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdVc2VyIHByb2ZpbGUgYW5kIG1lc3NhZ2VzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5J1xuICAgICAgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RFTEVURV0gL2FwaS91c2VyLXByb2ZpbGUgLSBPcGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNvbXBsZXRlIGRlbGV0ZSBvcGVyYXRpb24nLFxuICAgICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0RFTEVURV0gL2FwaS91c2VyLXByb2ZpbGUgLSBFcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgdXNlciBwcm9maWxlJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImdldEF1dGgiLCJOZXh0UmVzcG9uc2UiLCJjbGVya0NsaWVudCIsIm1lc3NhZ2VTZXJ2aWNlIiwiQ0xFUktfQVBJX1VSTCIsIkNMRVJLX1NFQ1JFVF9LRVkiLCJwcm9jZXNzIiwiZW52IiwiZ2V0Q2xlcmtVc2VyIiwidXNlcklkIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJ1cGRhdGVDbGVya1VzZXIiLCJ1cGRhdGVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwidXNlciIsImlkIiwidXNlcm5hbWUiLCJmaXJzdF9uYW1lIiwiaW1hZ2VVcmwiLCJpbWFnZV91cmwiLCJmdWxsTmFtZSIsImZ1bGxfbmFtZSIsImJpbyIsImRldGFpbHMiLCJtZXNzYWdlIiwiU3RyaW5nIiwiUE9TVCIsImN1cnJlbnRVc2VyIiwidXBkYXRlZFVzZXIiLCJERUxFVEUiLCJ0YXJnZXRVc2VySWQiLCJyZWFzc2lnbk1lc3NhZ2VzVG9EZWxldGVkVXNlciIsInVzZXJzIiwiZGVsZXRlVXNlciIsImNsZXJrRXJyb3IiLCJzdWNjZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/user-profile/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/messageService.ts":
/*!****************************************!*\
  !*** ./src/services/messageService.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETED_USER_ID: () => (/* binding */ DELETED_USER_ID),\n/* harmony export */   messageService: () => (/* binding */ messageService)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/DynamoDBClient.js\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/commands/PutItemCommand.js\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/commands/QueryCommand.js\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/commands/ScanCommand.js\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/commands/UpdateItemCommand.js\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/client-dynamodb/dist-es/commands/DeleteItemCommand.js\");\n/* harmony import */ var _aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/util-dynamodb */ \"(rsc)/./node_modules/@aws-sdk/util-dynamodb/dist-es/index.js\");\n\n\nconst dynamoClient = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DynamoDBClient({\n    region: 'us-east-2',\n    credentials: {\n        accessKeyId: 'AKIAW5BDQ6ZZ3EIKJYUI',\n        secretAccessKey: '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'\n    }\n});\nconst DELETED_USER_ID = 'deleted_user';\nconst messageService = {\n    async sendMessage (message) {\n        const timestamp = Date.now();\n        const id = `${timestamp}-${Math.random().toString(36).substr(2, 9)}`;\n        const params = {\n            TableName: 'Messages',\n            Item: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                id,\n                channelId: message.channelId,\n                userId: message.userId,\n                text: message.text,\n                timestamp,\n                username: message.username,\n                replyToId: message.replyToId || null,\n                reactions: {}\n            })\n        };\n        try {\n            await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_2__.PutItemCommand(params));\n            console.log('Message sent to DynamoDB:', {\n                id,\n                timestamp\n            });\n            return {\n                id,\n                timestamp\n            };\n        } catch (error) {\n            console.error('Error sending message to DynamoDB:', error);\n            throw error;\n        }\n    },\n    async getMessages (channelId) {\n        const params = {\n            TableName: 'Messages',\n            KeyConditionExpression: 'channelId = :channelId',\n            ExpressionAttributeValues: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                ':channelId': channelId\n            }),\n            ScanIndexForward: true // ascending order\n        };\n        try {\n            const { Items = [] } = await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_3__.QueryCommand(params));\n            const messages = Items.map((item)=>{\n                const unmarshalled = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(item);\n                // Ensure reactions is always an object\n                if (!unmarshalled.reactions) {\n                    unmarshalled.reactions = {};\n                }\n                // Ensure replyToId is properly handled\n                if (unmarshalled.replyToId === null) {\n                    delete unmarshalled.replyToId;\n                }\n                return unmarshalled;\n            });\n            console.log('Retrieved messages:', messages.length);\n            return messages;\n        } catch (error) {\n            console.error('Error getting messages from DynamoDB:', error);\n            throw error;\n        }\n    },\n    async toggleReaction ({ messageId, emoji, userId, username }) {\n        try {\n            console.log('Toggling reaction:', {\n                messageId,\n                emoji,\n                userId\n            });\n            const scanParams = {\n                TableName: 'Messages',\n                FilterExpression: 'id = :messageId',\n                ExpressionAttributeValues: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                    ':messageId': messageId\n                })\n            };\n            const { Items = [] } = await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_4__.ScanCommand(scanParams));\n            if (!Items.length) throw new Error('Message not found');\n            const message = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(Items[0]);\n            const reactions = message.reactions || {};\n            const users = reactions[emoji] || [];\n            const hasReacted = users.includes(userId);\n            const updateParams = {\n                TableName: 'Messages',\n                Key: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                    channelId: message.channelId,\n                    timestamp: message.timestamp\n                })\n            };\n            if (!message.reactions) {\n                updateParams.UpdateExpression = 'SET reactions = :reactions';\n                updateParams.ExpressionAttributeValues = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                    ':reactions': {\n                        [emoji]: [\n                            userId\n                        ]\n                    }\n                });\n            } else if (hasReacted) {\n                if (users.length === 1) {\n                    updateParams.UpdateExpression = 'REMOVE reactions.#e';\n                    updateParams.ExpressionAttributeNames = {\n                        '#e': emoji\n                    };\n                } else {\n                    updateParams.UpdateExpression = 'SET reactions.#e = :users';\n                    updateParams.ExpressionAttributeNames = {\n                        '#e': emoji\n                    };\n                    updateParams.ExpressionAttributeValues = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                        ':users': users.filter((id)=>id !== userId)\n                    });\n                }\n            } else {\n                updateParams.UpdateExpression = 'SET reactions.#e = :users';\n                updateParams.ExpressionAttributeNames = {\n                    '#e': emoji\n                };\n                updateParams.ExpressionAttributeValues = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                    ':users': [\n                        ...users,\n                        userId\n                    ]\n                });\n            }\n            await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_5__.UpdateItemCommand(updateParams));\n            return true;\n        } catch (error) {\n            console.error('Error toggling reaction:', error);\n            throw error;\n        }\n    },\n    async getMessage (messageId) {\n        const params = {\n            TableName: 'Messages',\n            FilterExpression: 'id = :messageId',\n            ExpressionAttributeValues: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                ':messageId': messageId\n            })\n        };\n        const { Items = [] } = await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_4__.ScanCommand(params));\n        if (!Items.length) return null;\n        const message = (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(Items[0]);\n        return message;\n    },\n    async clearMessages () {\n        try {\n            const params = {\n                TableName: 'Messages'\n            };\n            const { Items = [] } = await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_4__.ScanCommand(params));\n            for (const item of Items){\n                const deleteParams = {\n                    TableName: 'Messages',\n                    Key: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                        channelId: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(item).channelId,\n                        timestamp: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(item).timestamp\n                    })\n                };\n                await dynamoClient.send(new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_6__.DeleteItemCommand(deleteParams));\n            }\n            console.log('Cleared all messages');\n            return true;\n        } catch (error) {\n            console.error('Error clearing messages:', error);\n            throw error;\n        }\n    },\n    async reassignMessagesToDeletedUser (userId) {\n        try {\n            console.log('Reassigning messages for user:', userId);\n            // First, get all messages from this user\n            const queryCommand = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_3__.QueryCommand({\n                TableName: process.env.DYNAMODB_TABLE_MESSAGES,\n                IndexName: 'userId-index',\n                KeyConditionExpression: 'userId = :userId',\n                ExpressionAttributeValues: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                    ':userId': userId\n                })\n            });\n            const client = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DynamoDBClient({\n                region: 'us-east-2',\n                credentials: {\n                    accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n                    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY\n                }\n            });\n            const { Items = [] } = await client.send(queryCommand);\n            const messages = Items.map((item)=>(0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.unmarshall)(item));\n            console.log(`Found ${messages.length} messages to reassign`);\n            // Update each message to the deleted user\n            for (const message of messages){\n                const updateCommand = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_5__.UpdateItemCommand({\n                    TableName: process.env.DYNAMODB_TABLE_MESSAGES,\n                    Key: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                        channelId: message.channelId,\n                        timestamp: message.timestamp\n                    }),\n                    UpdateExpression: 'SET userId = :newUserId, username = :newUsername',\n                    ExpressionAttributeValues: (0,_aws_sdk_util_dynamodb__WEBPACK_IMPORTED_MODULE_0__.marshall)({\n                        ':newUserId': DELETED_USER_ID,\n                        ':newUsername': 'Deleted User'\n                    })\n                });\n                await client.send(updateCommand);\n            }\n            console.log('Successfully reassigned all messages');\n            return true;\n        } catch (error) {\n            console.error('Error reassigning messages:', error);\n            throw error;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDbEMsY0FBY087d0JBQ2QsZ0JBQWdCO29CQUNsQjtnQkFDRjtnQkFFQSxNQUFNMEQsT0FBT3JDLElBQUksQ0FBQ3dDO1lBQ3BCO1lBRUF2QyxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPO1FBRVQsRUFBRSxPQUFPQyxPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDLE1BQU1BO1FBQ1I7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcanVhbnBcXEdhdW50bGV0QUlcXFByb2plY3QgMVxcc3JjXFxzZXJ2aWNlc1xcbWVzc2FnZVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHluYW1vREJDbGllbnQsIFB1dEl0ZW1Db21tYW5kLCBRdWVyeUNvbW1hbmQsIEdldEl0ZW1Db21tYW5kLCBVcGRhdGVJdGVtQ29tbWFuZCwgU2NhbkNvbW1hbmQsIERlbGV0ZUl0ZW1Db21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYlwiO1xuaW1wb3J0IHsgbWFyc2hhbGwsIHVubWFyc2hhbGwgfSBmcm9tIFwiQGF3cy1zZGsvdXRpbC1keW5hbW9kYlwiO1xuXG5jb25zdCBkeW5hbW9DbGllbnQgPSBuZXcgRHluYW1vREJDbGllbnQoe1xuICByZWdpb246ICd1cy1lYXN0LTInLFxuICBjcmVkZW50aWFsczoge1xuICAgIGFjY2Vzc0tleUlkOiAnQUtJQVc1QkRRNlpaM0VJS0pZVUknLFxuICAgIHNlY3JldEFjY2Vzc0tleTogJ2MyYk9Ha0xFOWV6WHZ0S3hKbXd4anhHcWJYek9EcXJyQ2NoWTU5NTQnXG4gIH1cbn0pO1xuXG5leHBvcnQgY29uc3QgREVMRVRFRF9VU0VSX0lEID0gJ2RlbGV0ZWRfdXNlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNoYW5uZWxJZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgcmVwbHlUb0lkPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUmVhY3Rpb25EYXRhIHtcbiAgbWVzc2FnZUlkOiBzdHJpbmc7XG4gIGVtb2ppOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTWVzc2FnZVNlcnZpY2Uge1xuICBzZW5kTWVzc2FnZShtZXNzYWdlOiBPbWl0PE1lc3NhZ2UsICdpZCcgfCAndGltZXN0YW1wJz4pOiBQcm9taXNlPHsgaWQ6IHN0cmluZzsgdGltZXN0YW1wOiBudW1iZXIgfT47XG4gIGdldE1lc3NhZ2VzKGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlW10+O1xuICB0b2dnbGVSZWFjdGlvbihkYXRhOiBSZWFjdGlvbkRhdGEpOiBQcm9taXNlPGJvb2xlYW4+O1xuICBnZXRNZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlIHwgbnVsbD47XG4gIGNsZWFyTWVzc2FnZXMoKTogUHJvbWlzZTxib29sZWFuPjtcbiAgcmVhc3NpZ25NZXNzYWdlc1RvRGVsZXRlZFVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+O1xufVxuXG5leHBvcnQgY29uc3QgbWVzc2FnZVNlcnZpY2U6IE1lc3NhZ2VTZXJ2aWNlID0ge1xuICBhc3luYyBzZW5kTWVzc2FnZShtZXNzYWdlOiBPbWl0PE1lc3NhZ2UsICdpZCcgfCAndGltZXN0YW1wJz4pIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGlkID0gYCR7dGltZXN0YW1wfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuXG4gICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgVGFibGVOYW1lOiAnTWVzc2FnZXMnLFxuICAgICAgSXRlbTogbWFyc2hhbGwoe1xuICAgICAgICBpZCxcbiAgICAgICAgY2hhbm5lbElkOiBtZXNzYWdlLmNoYW5uZWxJZCxcbiAgICAgICAgdXNlcklkOiBtZXNzYWdlLnVzZXJJZCxcbiAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0LFxuICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgIHVzZXJuYW1lOiBtZXNzYWdlLnVzZXJuYW1lLFxuICAgICAgICByZXBseVRvSWQ6IG1lc3NhZ2UucmVwbHlUb0lkIHx8IG51bGwsXG4gICAgICAgIHJlYWN0aW9uczoge31cbiAgICAgIH0pXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkeW5hbW9DbGllbnQuc2VuZChuZXcgUHV0SXRlbUNvbW1hbmQocGFyYW1zKSk7XG4gICAgICBjb25zb2xlLmxvZygnTWVzc2FnZSBzZW50IHRvIER5bmFtb0RCOicsIHsgaWQsIHRpbWVzdGFtcCB9KTtcbiAgICAgIHJldHVybiB7IGlkLCB0aW1lc3RhbXAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlIHRvIER5bmFtb0RCOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyBnZXRNZXNzYWdlcyhjaGFubmVsSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIFRhYmxlTmFtZTogJ01lc3NhZ2VzJyxcbiAgICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICdjaGFubmVsSWQgPSA6Y2hhbm5lbElkJyxcbiAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IG1hcnNoYWxsKHtcbiAgICAgICAgJzpjaGFubmVsSWQnOiBjaGFubmVsSWRcbiAgICAgIH0pLFxuICAgICAgU2NhbkluZGV4Rm9yd2FyZDogdHJ1ZSAvLyBhc2NlbmRpbmcgb3JkZXJcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgSXRlbXMgPSBbXSB9ID0gYXdhaXQgZHluYW1vQ2xpZW50LnNlbmQobmV3IFF1ZXJ5Q29tbWFuZChwYXJhbXMpKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gSXRlbXMubWFwKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCB1bm1hcnNoYWxsZWQgPSB1bm1hcnNoYWxsKGl0ZW0pO1xuICAgICAgICAvLyBFbnN1cmUgcmVhY3Rpb25zIGlzIGFsd2F5cyBhbiBvYmplY3RcbiAgICAgICAgaWYgKCF1bm1hcnNoYWxsZWQucmVhY3Rpb25zKSB7XG4gICAgICAgICAgdW5tYXJzaGFsbGVkLnJlYWN0aW9ucyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSByZXBseVRvSWQgaXMgcHJvcGVybHkgaGFuZGxlZFxuICAgICAgICBpZiAodW5tYXJzaGFsbGVkLnJlcGx5VG9JZCA9PT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSB1bm1hcnNoYWxsZWQucmVwbHlUb0lkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bm1hcnNoYWxsZWQ7XG4gICAgICB9KSBhcyBNZXNzYWdlW107XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdSZXRyaWV2ZWQgbWVzc2FnZXM6JywgbWVzc2FnZXMubGVuZ3RoKTtcbiAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBtZXNzYWdlcyBmcm9tIER5bmFtb0RCOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyB0b2dnbGVSZWFjdGlvbih7IG1lc3NhZ2VJZCwgZW1vamksIHVzZXJJZCwgdXNlcm5hbWUgfTogUmVhY3Rpb25EYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdUb2dnbGluZyByZWFjdGlvbjonLCB7IG1lc3NhZ2VJZCwgZW1vamksIHVzZXJJZCB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2NhblBhcmFtcyA9IHtcbiAgICAgICAgVGFibGVOYW1lOiAnTWVzc2FnZXMnLFxuICAgICAgICBGaWx0ZXJFeHByZXNzaW9uOiAnaWQgPSA6bWVzc2FnZUlkJyxcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogbWFyc2hhbGwoe1xuICAgICAgICAgICc6bWVzc2FnZUlkJzogbWVzc2FnZUlkXG4gICAgICAgIH0pXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IEl0ZW1zID0gW10gfSA9IGF3YWl0IGR5bmFtb0NsaWVudC5zZW5kKG5ldyBTY2FuQ29tbWFuZChzY2FuUGFyYW1zKSk7XG4gICAgICBpZiAoIUl0ZW1zLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdNZXNzYWdlIG5vdCBmb3VuZCcpO1xuXG4gICAgICBjb25zdCBtZXNzYWdlID0gdW5tYXJzaGFsbChJdGVtc1swXSk7XG4gICAgICBjb25zdCByZWFjdGlvbnMgPSBtZXNzYWdlLnJlYWN0aW9ucyB8fCB7fTtcbiAgICAgIGNvbnN0IHVzZXJzID0gcmVhY3Rpb25zW2Vtb2ppXSB8fCBbXTtcbiAgICAgIGNvbnN0IGhhc1JlYWN0ZWQgPSB1c2Vycy5pbmNsdWRlcyh1c2VySWQpO1xuXG4gICAgICBjb25zdCB1cGRhdGVQYXJhbXM6IGFueSA9IHtcbiAgICAgICAgVGFibGVOYW1lOiAnTWVzc2FnZXMnLFxuICAgICAgICBLZXk6IG1hcnNoYWxsKHtcbiAgICAgICAgICBjaGFubmVsSWQ6IG1lc3NhZ2UuY2hhbm5lbElkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSlcbiAgICAgIH07XG5cbiAgICAgIGlmICghbWVzc2FnZS5yZWFjdGlvbnMpIHtcbiAgICAgICAgdXBkYXRlUGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gPSAnU0VUIHJlYWN0aW9ucyA9IDpyZWFjdGlvbnMnO1xuICAgICAgICB1cGRhdGVQYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyA9IG1hcnNoYWxsKHtcbiAgICAgICAgICAnOnJlYWN0aW9ucyc6IHsgW2Vtb2ppXTogW3VzZXJJZF0gfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzUmVhY3RlZCkge1xuICAgICAgICBpZiAodXNlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgdXBkYXRlUGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gPSAnUkVNT1ZFIHJlYWN0aW9ucy4jZSc7XG4gICAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyA9IHtcbiAgICAgICAgICAgICcjZSc6IGVtb2ppXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVQYXJhbXMuVXBkYXRlRXhwcmVzc2lvbiA9ICdTRVQgcmVhY3Rpb25zLiNlID0gOnVzZXJzJztcbiAgICAgICAgICB1cGRhdGVQYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzID0ge1xuICAgICAgICAgICAgJyNlJzogZW1vamlcbiAgICAgICAgICB9O1xuICAgICAgICAgIHVwZGF0ZVBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0gbWFyc2hhbGwoe1xuICAgICAgICAgICAgJzp1c2Vycyc6IHVzZXJzLmZpbHRlcigoaWQ6IHN0cmluZykgPT4gaWQgIT09IHVzZXJJZClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlUGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gPSAnU0VUIHJlYWN0aW9ucy4jZSA9IDp1c2Vycyc7XG4gICAgICAgIHVwZGF0ZVBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlTmFtZXMgPSB7XG4gICAgICAgICAgJyNlJzogZW1vamlcbiAgICAgICAgfTtcbiAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMgPSBtYXJzaGFsbCh7XG4gICAgICAgICAgJzp1c2Vycyc6IFsuLi51c2VycywgdXNlcklkXVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgZHluYW1vQ2xpZW50LnNlbmQobmV3IFVwZGF0ZUl0ZW1Db21tYW5kKHVwZGF0ZVBhcmFtcykpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRvZ2dsaW5nIHJlYWN0aW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcblxuICBhc3luYyBnZXRNZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlIHwgbnVsbD4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIFRhYmxlTmFtZTogJ01lc3NhZ2VzJyxcbiAgICAgIEZpbHRlckV4cHJlc3Npb246ICdpZCA9IDptZXNzYWdlSWQnLFxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogbWFyc2hhbGwoe1xuICAgICAgICAnOm1lc3NhZ2VJZCc6IG1lc3NhZ2VJZFxuICAgICAgfSlcbiAgICB9O1xuXG4gICAgY29uc3QgeyBJdGVtcyA9IFtdIH0gPSBhd2FpdCBkeW5hbW9DbGllbnQuc2VuZChuZXcgU2NhbkNvbW1hbmQocGFyYW1zKSk7XG4gICAgaWYgKCFJdGVtcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IG1lc3NhZ2UgPSB1bm1hcnNoYWxsKEl0ZW1zWzBdKSBhcyBNZXNzYWdlO1xuICAgIHJldHVybiBtZXNzYWdlO1xuICB9LFxuXG4gIGFzeW5jIGNsZWFyTWVzc2FnZXMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgVGFibGVOYW1lOiAnTWVzc2FnZXMnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyBJdGVtcyA9IFtdIH0gPSBhd2FpdCBkeW5hbW9DbGllbnQuc2VuZChuZXcgU2NhbkNvbW1hbmQocGFyYW1zKSk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBJdGVtcykge1xuICAgICAgICBjb25zdCBkZWxldGVQYXJhbXMgPSB7XG4gICAgICAgICAgVGFibGVOYW1lOiAnTWVzc2FnZXMnLFxuICAgICAgICAgIEtleTogbWFyc2hhbGwoe1xuICAgICAgICAgICAgY2hhbm5lbElkOiB1bm1hcnNoYWxsKGl0ZW0pLmNoYW5uZWxJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdW5tYXJzaGFsbChpdGVtKS50aW1lc3RhbXBcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IGR5bmFtb0NsaWVudC5zZW5kKG5ldyBEZWxldGVJdGVtQ29tbWFuZChkZWxldGVQYXJhbXMpKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0NsZWFyZWQgYWxsIG1lc3NhZ2VzJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2xlYXJpbmcgbWVzc2FnZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIHJlYXNzaWduTWVzc2FnZXNUb0RlbGV0ZWRVc2VyKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZWFzc2lnbmluZyBtZXNzYWdlcyBmb3IgdXNlcjonLCB1c2VySWQpO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCwgZ2V0IGFsbCBtZXNzYWdlcyBmcm9tIHRoaXMgdXNlclxuICAgICAgY29uc3QgcXVlcnlDb21tYW5kID0gbmV3IFF1ZXJ5Q29tbWFuZCh7XG4gICAgICAgIFRhYmxlTmFtZTogcHJvY2Vzcy5lbnYuRFlOQU1PREJfVEFCTEVfTUVTU0FHRVMsXG4gICAgICAgIEluZGV4TmFtZTogJ3VzZXJJZC1pbmRleCcsXG4gICAgICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICd1c2VySWQgPSA6dXNlcklkJyxcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogbWFyc2hhbGwoe1xuICAgICAgICAgICc6dXNlcklkJzogdXNlcklkXG4gICAgICAgIH0pXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2xpZW50ID0gbmV3IER5bmFtb0RCQ2xpZW50KHtcbiAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0yJyxcbiAgICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQhLFxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyBJdGVtcyA9IFtdIH0gPSBhd2FpdCBjbGllbnQuc2VuZChxdWVyeUNvbW1hbmQpO1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBJdGVtcy5tYXAoaXRlbSA9PiB1bm1hcnNoYWxsKGl0ZW0pKTtcblxuICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7bWVzc2FnZXMubGVuZ3RofSBtZXNzYWdlcyB0byByZWFzc2lnbmApO1xuXG4gICAgICAvLyBVcGRhdGUgZWFjaCBtZXNzYWdlIHRvIHRoZSBkZWxldGVkIHVzZXJcbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykge1xuICAgICAgICBjb25zdCB1cGRhdGVDb21tYW5kID0gbmV3IFVwZGF0ZUl0ZW1Db21tYW5kKHtcbiAgICAgICAgICBUYWJsZU5hbWU6IHByb2Nlc3MuZW52LkRZTkFNT0RCX1RBQkxFX01FU1NBR0VTLFxuICAgICAgICAgIEtleTogbWFyc2hhbGwoe1xuICAgICAgICAgICAgY2hhbm5lbElkOiBtZXNzYWdlLmNoYW5uZWxJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBVcGRhdGVFeHByZXNzaW9uOiAnU0VUIHVzZXJJZCA9IDpuZXdVc2VySWQsIHVzZXJuYW1lID0gOm5ld1VzZXJuYW1lJyxcbiAgICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiBtYXJzaGFsbCh7XG4gICAgICAgICAgICAnOm5ld1VzZXJJZCc6IERFTEVURURfVVNFUl9JRCxcbiAgICAgICAgICAgICc6bmV3VXNlcm5hbWUnOiAnRGVsZXRlZCBVc2VyJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IGNsaWVudC5zZW5kKHVwZGF0ZUNvbW1hbmQpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHJlYXNzaWduZWQgYWxsIG1lc3NhZ2VzJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFzc2lnbmluZyBtZXNzYWdlczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn07ICJdLCJuYW1lcyI6WyJEeW5hbW9EQkNsaWVudCIsIlB1dEl0ZW1Db21tYW5kIiwiUXVlcnlDb21tYW5kIiwiVXBkYXRlSXRlbUNvbW1hbmQiLCJTY2FuQ29tbWFuZCIsIkRlbGV0ZUl0ZW1Db21tYW5kIiwibWFyc2hhbGwiLCJ1bm1hcnNoYWxsIiwiZHluYW1vQ2xpZW50IiwicmVnaW9uIiwiY3JlZGVudGlhbHMiLCJhY2Nlc3NLZXlJZCIsInNlY3JldEFjY2Vzc0tleSIsIkRFTEVURURfVVNFUl9JRCIsIm1lc3NhZ2VTZXJ2aWNlIiwic2VuZE1lc3NhZ2UiLCJtZXNzYWdlIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwicGFyYW1zIiwiVGFibGVOYW1lIiwiSXRlbSIsImNoYW5uZWxJZCIsInVzZXJJZCIsInRleHQiLCJ1c2VybmFtZSIsInJlcGx5VG9JZCIsInJlYWN0aW9ucyIsInNlbmQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJnZXRNZXNzYWdlcyIsIktleUNvbmRpdGlvbkV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzIiwiU2NhbkluZGV4Rm9yd2FyZCIsIkl0ZW1zIiwibWVzc2FnZXMiLCJtYXAiLCJpdGVtIiwidW5tYXJzaGFsbGVkIiwibGVuZ3RoIiwidG9nZ2xlUmVhY3Rpb24iLCJtZXNzYWdlSWQiLCJlbW9qaSIsInNjYW5QYXJhbXMiLCJGaWx0ZXJFeHByZXNzaW9uIiwiRXJyb3IiLCJ1c2VycyIsImhhc1JlYWN0ZWQiLCJpbmNsdWRlcyIsInVwZGF0ZVBhcmFtcyIsIktleSIsIlVwZGF0ZUV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlTmFtZXMiLCJmaWx0ZXIiLCJnZXRNZXNzYWdlIiwiY2xlYXJNZXNzYWdlcyIsImRlbGV0ZVBhcmFtcyIsInJlYXNzaWduTWVzc2FnZXNUb0RlbGV0ZWRVc2VyIiwicXVlcnlDb21tYW5kIiwicHJvY2VzcyIsImVudiIsIkRZTkFNT0RCX1RBQkxFX01FU1NBR0VTIiwiSW5kZXhOYW1lIiwiY2xpZW50IiwiQVdTX0FDQ0VTU19LRVlfSUQiLCJBV1NfU0VDUkVUX0FDQ0VTU19LRVkiLCJ1cGRhdGVDb21tYW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/messageService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@aws-sdk","vendor-chunks/@smithy","vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/crypto-js","vendor-chunks/mnemonist","vendor-chunks/obliterator","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fuser-profile%2Froute&page=%2Fapi%2Fuser-profile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-profile%2Froute.ts&appDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cjuanp%5CGauntletAI%5CProject%201&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();